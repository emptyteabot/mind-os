<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdeaFlow AI</title>
    <!-- å¼•å…¥ Tailwind CSS (æ— éœ€å®‰è£…ï¼Œç›´æ¥ç”¨) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥å›¾æ ‡åº“ -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- å¼•å…¥è°·æ­Œå­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #09090b; /* ææ·±ç°ï¼Œæ¥è¿‘çº¯é»‘ */
            color: #e4e4e7;
            overflow: hidden; /* ç¦æ­¢æ»šåŠ¨ */
        }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        /* æ ¸å¿ƒå…‰æ™•åŠ¨ç”» */
        .glow-effect {
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(59,130,246,0.15) 0%, rgba(147,51,234,0.05) 40%, rgba(0,0,0,0) 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: -1;
            animation: pulse-slow 8s infinite ease-in-out;
            pointer-events: none;
        }

        @keyframes pulse-slow {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.5; }
        }

        /* è¾“å…¥æ¡†çš„å½©è™¹è¾¹æ¡†å…‰æ™• */
        .input-glow:focus-within {
            box-shadow: 0 0 40px -10px rgba(59, 130, 246, 0.4);
            border-color: rgba(96, 165, 250, 0.5);
        }

        /* æ‰“å­—æœºå…‰æ ‡ */
        .cursor-blink {
            display: inline-block;
            width: 8px;
            height: 18px;
            background-color: #60a5fa;
            margin-left: 4px;
            vertical-align: middle;
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* æ¶ˆæ¯å‡ºç°åŠ¨ç”» */
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="h-screen flex flex-col items-center justify-between py-10">

    <!-- èƒŒæ™¯å…‰æ™• -->
    <div class="glow-effect"></div>

    <!-- é¡¶éƒ¨ Logo åŒºåŸŸ -->
    <div class="absolute top-8 left-8 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity cursor-default">
        <i data-lucide="sparkles" class="w-5 h-5 text-blue-400"></i>
        <span class="text-sm font-medium tracking-widest text-gray-400 uppercase">IdeaFlow</span>
    </div>

    <!-- ä¸­é—´ï¼šå¯¹è¯æµåŒºåŸŸ -->
    <div id="chat-container" class="flex-1 w-full max-w-2xl px-6 overflow-y-auto no-scrollbar flex flex-col gap-6 pt-20 pb-4">
        <!-- æ¬¢è¿è¯­ -->
        <div class="flex gap-4 fade-in-up">
            <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg shadow-blue-900/20">
                <i data-lucide="bot" class="w-4 h-4 text-white"></i>
            </div>
            <div class="space-y-2">
                <div class="text-sm text-gray-400">AI Assistant</div>
                <div class="text-base leading-7 text-gray-200">
                    <p>æˆ‘åœ¨è¿™é‡Œã€‚æ•æ‰ä½ çš„æ¯ä¸€ä¸ªç¬é—´çµæ„Ÿã€‚</p>
                </div>
            </div>
        </div>
        <!-- åŠ¨æ€æ’å…¥çš„å†…å®¹ä¼šåœ¨è¿™é‡Œ -->
    </div>

    <!-- åº•éƒ¨ï¼šè¾“å…¥åŒºåŸŸ -->
    <div class="w-full max-w-2xl px-6 mb-4 relative z-10">
        <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ (éšå½¢/åŠ è½½ä¸­) -->
        <div id="status-bar" class="h-6 mb-2 flex items-center gap-2 text-xs font-mono text-blue-400 opacity-0 transition-opacity duration-300">
            <i data-lucide="loader-2" class="w-3 h-3 animate-spin"></i>
            <span id="status-text">ANALYZING INTENT...</span>
        </div>

        <div class="relative group input-glow bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl transition-all duration-300">
            <textarea 
                id="user-input"
                class="w-full bg-transparent text-white p-4 pl-5 pr-14 text-lg outline-none resize-none h-[64px] max-h-[200px] placeholder-gray-500 font-light"
                placeholder="è¾“å…¥çµæ„Ÿ..."
                rows="1"
            ></textarea>
            
            <button id="send-btn" class="absolute right-3 bottom-3 p-2 rounded-xl bg-white/10 text-gray-400 hover:bg-white/20 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed">
                <i data-lucide="arrow-up" class="w-5 h-5"></i>
            </button>
        </div>
        <div class="text-center mt-3 text-xs text-gray-600">Enter å‘é€ Â· Shift + Enter æ¢è¡Œ</div>
    </div>

    <script>
        // åˆå§‹åŒ–å›¾æ ‡
        lucide.createIcons();

        const input = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const chatContainer = document.getElementById('chat-container');
        const statusBar = document.getElementById('status-bar');
        const statusText = document.getElementById('status-text');

        // è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦
        input.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            if(this.value === '') this.style.height = '64px';
        });

        // ç›‘å¬å›è½¦å‘é€
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend();
            }
        });

        sendBtn.addEventListener('click', handleSend);

        async function handleSend() {
            const text = input.value.trim();
            if (!text) return;

            // 1. ç”¨æˆ·æ¶ˆæ¯ä¸Šå±
            addMessage(text, 'user');
            input.value = '';
            input.style.height = '64px';
            input.disabled = true;
            sendBtn.disabled = true;

            // 2. æ¨¡æ‹Ÿ AI æ€è€ƒ (æ˜¾ç¤ºçŠ¶æ€æ )
            statusBar.classList.remove('opacity-0');
            
            // éšæœºæ¨¡æ‹Ÿæ€è€ƒæ—¶é—´ (1-2ç§’)
            await wait(1000); 
            statusText.innerText = "CLASSIFYING...";
            await wait(800);
            statusText.innerText = "GENERATING RESPONSE...";

            // 3. æ¨¡æ‹Ÿ AI å“åº”
            const response = mockAIResponse(text);
            statusBar.classList.add('opacity-0');
            
            // 4. AI æ¶ˆæ¯æ‰“å­—æœºè¾“å‡º
            await typeWriterMessage(response);
            
            // 5. æ¢å¤è¾“å…¥
            input.disabled = false;
            sendBtn.disabled = false;
            input.focus();
            
            // é‡ç½®çŠ¶æ€æ æ–‡æ¡ˆ
            setTimeout(() => statusText.innerText = "ANALYZING INTENT...", 500);
        }

        // æ·»åŠ æ¶ˆæ¯åˆ°ç•Œé¢
        function addMessage(content, role) {
            const div = document.createElement('div');
            div.className = 'flex gap-4 fade-in-up mb-6';
            
            if (role === 'user') {
                div.innerHTML = `
                    <div class="flex-1 text-right">
                        <div class="text-sm text-gray-500 mb-1">You</div>
                        <div class="inline-block bg-white/10 px-4 py-2.5 rounded-2xl rounded-tr-sm text-gray-100 text-base border border-white/5 shadow-sm">
                            ${escapeHtml(content)}
                        </div>
                    </div>
                `;
            } else {
                // AI æ¶ˆæ¯å®¹å™¨ï¼ˆå†…å®¹å…ˆç©ºç€ï¼Œç­‰æ‰“å­—æœºå¡«ï¼‰
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg shadow-blue-900/20">
                        <i data-lucide="bot" class="w-4 h-4 text-white"></i>
                    </div>
                    <div class="space-y-2 flex-1 pt-1">
                        <div class="text-sm text-gray-400 flex items-center gap-2">
                            Gemini 
                            <span class="text-[10px] px-1.5 py-0.5 bg-blue-500/20 text-blue-300 rounded border border-blue-500/30 font-mono tracking-tight">${content.tag}</span>
                        </div>
                        <div class="text-base leading-7 text-gray-200 font-light ai-content"></div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(div);
            scrollToBottom();
            lucide.createIcons(); // åˆ·æ–°å›¾æ ‡
            return div.querySelector('.ai-content');
        }

        // æ‰“å­—æœºæ•ˆæœæ ¸å¿ƒé€»è¾‘
        async function typeWriterMessage(data) {
            const container = addMessage(data, 'ai'); // åˆ›å»ºç©ºæ°”æ³¡
            const text = data.text;
            
            // æ·»åŠ å…‰æ ‡
            const cursor = document.createElement('span');
            cursor.className = 'cursor-blink';
            container.appendChild(cursor);

            for (let i = 0; i < text.length; i++) {
                cursor.before(text[i]); // åœ¨å…‰æ ‡å‰æ’å…¥æ–‡å­—
                scrollToBottom();
                
                // éšæœºæ‰“å­—é€Ÿåº¦ï¼Œæ¨¡æ‹ŸçœŸäºº/AIåœé¡¿
                const speed = Math.random() * 30 + 10; 
                if (text[i] === 'ï¼Œ' || text[i] === 'ã€‚') await wait(300); // æ ‡ç‚¹ç¬¦å·åœé¡¿
                else await wait(speed);
            }
            
            // ç»“æŸåç§»é™¤å…‰æ ‡ï¼ˆæˆ–è€…ä¿ç•™çœ‹ä½ éœ€è¦ï¼‰
            await wait(2000);
            cursor.remove();
        }

        // ç®€å•çš„æ¨¡æ‹Ÿå¤§è„‘ (ä¼ª AI)
        function mockAIResponse(input) {
            const lower = input.toLowerCase();
            
            if (lower.includes('æé†’') || lower.includes('ç‚¹') || lower.includes('æ˜å¤©')) {
                return {
                    tag: 'TODO',
                    text: `å·²è¯†åˆ«ä¸ºå¾…åŠäº‹é¡¹ã€‚æˆ‘å·²å°†å…¶æ·»åŠ åˆ°æ‚¨çš„ä»»åŠ¡åˆ—è¡¨ä¸­ã€‚\n\nğŸ“… æ—¶é—´é”šç‚¹ï¼šå·²æå–\nğŸ”” æé†’çº§åˆ«ï¼šé«˜\n\nå»ºè®®ï¼šåœ¨æ‰§è¡Œæ­¤ä»»åŠ¡å‰ï¼Œæ‚¨å¯èƒ½éœ€è¦å‡†å¤‡ç›¸å…³çš„æ–‡æ¡£ã€‚`
                };
            } else if (lower.includes('æƒ³æ³•') || lower.includes('è§‰å¾—') || lower.includes('çµæ„Ÿ')) {
                return {
                    tag: 'IDEA',
                    text: `æ•æ‰åˆ°ä¸€ä¸ªæœ‰è¶£çš„æ€ç»´ç¢ç‰‡ã€‚å·²å½’æ¡£è‡³ã€Œçµæ„Ÿåº“ã€ã€‚\n\nğŸ’¡ å…³è”å»ºè®®ï¼š\nè¿™ä¸ªæƒ³æ³•ä¸æ‚¨ä¸Šå‘¨è®°å½•çš„â€œè‡ªåŠ¨åŒ–è„šæœ¬â€ä¼¼ä¹æœ‰æŸç§å†…åœ¨è”ç³»ã€‚å»ºè®®å°è¯•å°†ä¸¤è€…ç»“åˆï¼Œæˆ–è®¸èƒ½äº§ç”Ÿæ–°çš„åŒ–å­¦ååº”ã€‚`
                };
            } else if (lower.length < 5) {
                return {
                    tag: 'CHAT',
                    text: `æˆ‘åœ¨å¬ã€‚è¯·ç»§ç»­å±•å¼€æ‚¨çš„æƒ³æ³•ï¼Œæˆ‘ä¼šå¸®æ‚¨æ¢³ç†å‡ºç»“æ„ã€‚`
                };
            } else {
                return {
                    tag: 'NOTE',
                    text: `å·²è®°å½•ã€‚æ­£åœ¨å°è¯•åˆ†æè¿™æ®µå†…å®¹çš„ä¸Šä¸‹æ–‡å…³è”...\n\næˆ‘å°†å…¶æ ‡è®°ä¸ºæœªåˆ†ç±»ç¬”è®°ï¼Œç¨åæ‚¨å¯ä»¥éšæ—¶å›é¡¾æ•´ç†ã€‚`
                };
            }
        }

        function scrollToBottom() {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>